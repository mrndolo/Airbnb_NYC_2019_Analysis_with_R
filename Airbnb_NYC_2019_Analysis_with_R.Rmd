---
title: "Airbnb_NYC_2019_Analysis_with_R"
author: "Mr Ndolo"
date: "2024-12-15"
output: html_document
---

```{r warning=FALSE}
```

## Introduction
In this analysis, I will explore the 2019 Airbnb listings data for New York City. My main goals are:

* To clean and structure the dataset for accurate analysis.

* To generate insights about Airbnb listings through visualizations.

* To build predictive models to understand factors influencing price and customer behaviors

I aim to identify trends in room types, pricing, and availability across neighborhoods. Additionally, I will use machine learning models to predict prices and group listings into clusters.

## **1. Data Cleaning and Restructuring**

### **1.1 Loading and Exploring the Dataset**
```{r message=FALSE}
# Load necessary libraries
library(tidyverse)
library(lubridate)

# Import the dataset
airbnb_data <- read.csv("AB_NYC_2019.csv")

# Explore the dataset
glimpse(airbnb_data)
summary(airbnb_data)
dim(airbnb_data)
head(airbnb_data)
```
The dataset contains information about Airbnb listings in New York City, such as prices, neighborhoods, room types, and availability. By checking the structure and summary, I can identify missing values, data types, and any anomalies that need attention

### **1.2 Handling N/A, null and Missing Values**
```{r}
# Check for missing values
colSums(is.na(airbnb_data))

# Impute missing values in `reviews_per_month` with median grouped by neighborhood group
airbnb_data <- airbnb_data %>%
  group_by(neighbourhood_group) %>%
  mutate(reviews_per_month = ifelse(is.na(reviews_per_month), 
                                    median(reviews_per_month, na.rm = TRUE), 
                                    reviews_per_month)) %>%
  ungroup()

# Drop rows with missing `name` or `host_name`
airbnb_data <- airbnb_data %>% drop_na(name, host_name)

# Verify missing values resolved
colSums(is.na(airbnb_data))
```
I identified missing values in columns like reviews_per_month. Since this field is crucial for analyzing customer engagement, I imputed missing values with the median grouped by neighbourhood_group. 

Rows with missing name or host_name were removed to ensure meaningful analysis.

I feel it is now safe to continue with my analysis since I have dealt properly with the N/A values.

### **1.3 Removing Duplicates**
```{r}
# Check and remove duplicates
sum(duplicated(airbnb_data))
airbnb_data <- airbnb_data %>% distinct()
```

Duplicate entries can skew my analysis. By removing them, I ensure that each listing is unique.

Above, I can confirm that I have removed/there are no duplicate values in my analysis so my dataset will be valid for analysis.

### **1.4 Handling Outliers**
```{r}
# Identify outliers in price using IQR
Q1 <- quantile(airbnb_data$price, 0.25)
Q3 <- quantile(airbnb_data$price, 0.75)
IQR <- Q3 - Q1

# Filter to remove outliers
airbnb_data <- airbnb_data %>% 
  filter(price >= (Q1 - 1.5 * IQR) & price <= (Q3 + 1.5 * IQR))

# Boxplot to visualize outliers
ggplot(airbnb_data, aes(y = price)) + 
  geom_boxplot() +
  labs(title = "Price Distribution After Outlier Removal")
```

Prices that deviate significantly from the normal range (outliers) could mislead the analysis. 

Using the interquartile range (IQR) method, I removed the extreme values. The boxplot above confirms the filtered dataset.

I have now successfully handled the outlier and I can proceed with my analysis.

### **1.5 Restructuring the Data**
```{r}
# Convert last_review to Date type
airbnb_data$last_review <- as.Date(airbnb_data$last_review)
glimpse(airbnb_data)
```

To work well with time-based analysis, I converted the last_review column to a date format.

### **1.6 Final structure of the cleaned data**
```{r}
glimpse(airbnb_data)
summary(airbnb_data)
dim(airbnb_data)
head(airbnb_data)
```

This now proves that my data is clean and I can continue to perform my analysis on the data. I have successfully eliminated the nulls, duplicates and outliers from my data.


## **2. Data Visualization**

### **2.1 Insights Using ggplot2**
```{r}
# Distribution of room types
ggplot(airbnb_data, aes(x = room_type)) +
  geom_bar(fill = "skyblue") +
  labs(title = "Room Type Distribution", x = "Room Type", y = "Count")

# Percentage of each room type
room_type_distribution <- airbnb_data %>%
  group_by(room_type) %>%
  summarise(count = n()) %>%
  mutate(percentage = round(count / sum(count) * 100, 1))
ggplot(room_type_distribution, aes(x = "", y = percentage, fill = room_type)) +
  geom_bar(stat = "identity", width = 1) +
  coord_polar("y", start = 0) +
  geom_text(aes(label = paste0(percentage, "%")), 
            position = position_stack(vjust = 0.5), 
            color = "white", size = 4) +
  labs(title = "Distribution of Listings by Room Type", fill = "Room Type") +
  theme_void() +
  theme(plot.title = element_text(hjust = 0.5))


# Average price by neighbourhood group
ggplot(airbnb_data, aes(x = neighbourhood_group, y = price, fill = neighbourhood_group)) +
  geom_boxplot() +
  labs(title = "Price by Neighbourhood Group", x = "Neighbourhood Group", y = "Price")

# Availability of listings across neighbourhoods
ggplot(airbnb_data, aes(x = availability_365)) +
  geom_histogram(binwidth = 30, fill = "green") +
  labs(title = "Availability of Listings", x = "Availability (Days)", y = "Count")
```